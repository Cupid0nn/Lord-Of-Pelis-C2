(()=>{"use strict";function e(e,t){const n=document.createElement("div");n.classList.add("card"),n.innerHTML=`\n      <div class="card-image">\n        <figure class="image is-4by3">\n          <img src="${e.poster}" alt="${e.title}">\n        </figure>\n      </div>\n      <div class="card-content">\n        <div class="media">\n          <div class="media-content">\n            <p class="title is-4">${e.title} (${e.year})</p>\n            <p class="subtitle is-6">${e.director}</p>\n          </div>\n        </div>\n        <div class="content">\n          <p><strong>Duración:</strong> ${e.duration}</p>\n          <p><strong>Género:</strong> ${e.genre.join(", ")}</p>\n          <p><strong>Rate:</strong> ${e.rate}</p>\n        </div>\n      </div>\n    `,t.appendChild(n)}document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("cajapelis"),n=document.getElementById("form-add-movie"),o=[];!function(e,t){fetch("http://localhost:3000/movies").then((e=>{if(!e.ok)throw new Error("Error al obtener las peliculas");return e.json()})).then((n=>{console.log("Datos recibidos:",n),n.forEach((n=>e(n,t)))})).catch((e=>console.error("Error al obtener las películas:",e)))}(e,t),n.addEventListener("submit",(function(n){!function(e,t,n,o){e.preventDefault(),document.querySelectorAll(".help.is-danger").forEach((e=>e.textContent="")),document.querySelectorAll(".input").forEach((e=>e.classList.remove("is-danger")));const r=document.getElementById("MovieName").value.trim(),a=document.getElementById("MovieYear").value.trim(),i=document.getElementById("MovieDirector").value.trim(),l=document.getElementById("MovieDuration").value.trim(),d=document.getElementById("MovieGenre").value.trim(),s=document.getElementById("MovieRate").value.trim(),c=document.getElementById("MoviePoster").value.trim();let m=!0;if(r||(m=!1,document.getElementById("MovieNameError").textContent="El nombre de la película es obligatorio.",document.getElementById("MovieName").classList.add("is-danger")),(!a||isNaN(a)||parseInt(a)<=0)&&(m=!1,document.getElementById("MovieYearError").textContent="El año de la película es obligatorio y debe ser un número positivo.",document.getElementById("MovieYear").classList.add("is-danger")),i||(m=!1,document.getElementById("MovieDirectorError").textContent="El director de la película es obligatorio.",document.getElementById("MovieDirector").classList.add("is-danger")),l||(m=!1,document.getElementById("MovieDurationError").textContent="La duración de la película es obligatoria.",document.getElementById("MovieDuration").classList.add("is-danger")),d||(m=!1,document.getElementById("MovieGenreError").textContent="El género de la película es obligatorio.",document.getElementById("MovieGenre").classList.add("is-danger")),(!s||isNaN(s)||parseFloat(s)<0||parseFloat(s)>10)&&(m=!1,document.getElementById("MovieRateError").textContent="La calificación de la película es obligatoria y debe estar entre 0 y 10.",document.getElementById("MovieRate").classList.add("is-danger")),c&&function(e){try{return new URL(e),!0}catch(e){return!1}}(c)||(m=!1,document.getElementById("MoviePosterError").textContent="El enlace del póster de la película es obligatorio y debe ser una URL válida.",document.getElementById("MoviePoster").classList.add("is-danger")),m){const e={title:r,year:parseInt(a),director:i,duration:l,genre:d.split(",").map((e=>e.trim())),rate:parseFloat(s),poster:c};console.log("Nueva película añadida:",e),t.push(e),n(e,o)}}(n,o,e,t)}))}))})();